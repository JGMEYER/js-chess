(this["webpackJsonpjs-chess"]=this["webpackJsonpjs-chess"]||[]).push([[0],{21:function(e,t,n){},22:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){"use strict";n.r(t);var i=n(8),o=n.n(i),l=n(15),a=n.n(l),r=(n(21),n(9)),s=n(0),c=n(1),h=n(7),u=n(4),v=n(3),d=(n(22),n(2)),f=function(e){Object(u.a)(n,e);var t=Object(v.a)(n);function n(e){var i;return Object(s.a)(this,n),(i=t.call(this,e)).handleOnClick=i.handleOnClick.bind(Object(h.a)(i)),i}return Object(c.a)(n,[{key:"handleOnClick",value:function(e,t){this.props.movePiece(e,t)}},{key:"render",value:function(){var e=this;return Object(d.jsx)("div",{className:"chess-board",children:new Array(64).fill(null).map((function(t,n){return Object(d.jsx)("div",{onClick:function(){return e.handleOnClick(Math.floor(n/8),n%8)}},"square".concat(n))}))})}}]),n}(o.a.Component),b=(n(24),{WHITE:0,BLACK:1});Object.freeze(b);var w=b,j=function(e){Object(u.a)(n,e);var t=Object(v.a)(n);function n(e){var i;return Object(s.a)(this,n),(i=t.call(this,e)).handleOnClick=i.handleOnClick.bind(Object(h.a)(i)),i}return Object(c.a)(n,[{key:"handleOnClick",value:function(){this.props.selectPiece()}},{key:"render",value:function(){var e="chess-piece";return this.props.piece.color===w.WHITE&&(e+=" white"),this.props.isInCheck&&(e+=" in-check"),Object(d.jsx)("div",{className:e,style:{top:"".concat(50*this.props.piece.row,"px"),left:"".concat(50*this.props.piece.col,"px")},onClick:this.handleOnClick,children:this.props.piece.icon})}}]),n}(o.a.Component),O=(n(25),n(5)),k=n(6),g=n(16),C=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Object(s.a)(this,e),this.coordsAStart=t,this.coordsAEnd=n,this.coordsBStart=i,this.coordsBEnd=o}return Object(c.a)(e,[{key:"execute",value:function(e){e.move(this),e.enPassantTarget="-"}}]),e}(),E=function(){function e(t,n,i,o,l,a){if(Object(s.a)(this,e),this.constructor==e)throw new Error("Cannot instantiate abstract class ChessPiece");this.id=e.count,this.icon=t,this.printIcon=n,this.notation=i,this.color=o,this.row=l,this.col=a,e.count++}return Object(c.a)(e,[{key:"move",value:function(e,t){this.row=e,this.col=t}},{key:"_validMovesAlongLine",value:function(e,t,n,i){for(var o=[],l=null,a=null,r=this.row+t,s=this.col+n;r>=0&&r<=7&&s>=0&&s<=7;){if(l=e.get(r,s),a=new C([this.row,this.col],[r,s]),l){l.isEnemyOf(this.color)&&o.push(a);break}i&&e.kingWouldBeInCheck(this.color,a)||o.push(a),r+=t,s+=n}return o}},{key:"validMoves",value:function(e,t){throw new Error("Method validMoves() must be implemented.")}},{key:"isEnemyOf",value:function(e){return e!==this.color}}]),e}();E.count=0;var p=E,m=function(e){Object(u.a)(n,e);var t=Object(v.a)(n);function n(e,i,o){Object(s.a)(this,n);var l=e===w.WHITE?"\u2657":"\u265d",a=e===w.WHITE?"B":"b";return t.call(this,"\u265d",l,a,e,i,o)}return Object(c.a)(n,[{key:"validMoves",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this._validMovesAlongLine(e,-1,-1,t),i=this._validMovesAlongLine(e,-1,1,t),o=this._validMovesAlongLine(e,1,-1,t),l=this._validMovesAlongLine(e,1,1,t);return[].concat(Object(O.a)(n),Object(O.a)(i),Object(O.a)(o),Object(O.a)(l))}}]),n}(p),I=function(e){Object(u.a)(n,e);var t=Object(v.a)(n);function n(e,i,o){Object(s.a)(this,n);var l=e===w.WHITE?"\u2658":"\u265e",a=e===w.WHITE?"N":"n";return t.call(this,"\u265e",l,a,e,i,o)}return Object(c.a)(n,[{key:"validMoves",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=[new C([this.row,this.col],[this.row-2,this.col-1]),new C([this.row,this.col],[this.row-2,this.col+1]),new C([this.row,this.col],[this.row-1,this.col+2]),new C([this.row,this.col],[this.row+1,this.col+2]),new C([this.row,this.col],[this.row+2,this.col+1]),new C([this.row,this.col],[this.row+2,this.col-1]),new C([this.row,this.col],[this.row+1,this.col-2]),new C([this.row,this.col],[this.row-1,this.col-2])],o=null,l=i.filter((function(n){var i=Object(k.a)(n.coordsAEnd,2),l=i[0],a=i[1];return!(l<0||l>7||a<0||a>7)&&(!(o=e.get(l,a))||!(!o||!o.isEnemyOf(t.color)))}));return n?l.filter((function(n){return!e.kingWouldBeInCheck(t.color,n)})):l}}]),n}(p),y=function(e){Object(u.a)(n,e);var t=Object(v.a)(n);function n(e,i,o){Object(s.a)(this,n);var l=e===w.WHITE?"\u2655":"\u265b",a=e===w.WHITE?"Q":"q";return t.call(this,"\u265b",l,a,e,i,o)}return Object(c.a)(n,[{key:"validMoves",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this._validMovesAlongLine(e,-1,-1,t),i=this._validMovesAlongLine(e,-1,1,t),o=this._validMovesAlongLine(e,1,-1,t),l=this._validMovesAlongLine(e,1,1,t),a=this._validMovesAlongLine(e,-1,0,t),r=this._validMovesAlongLine(e,0,1,t),s=this._validMovesAlongLine(e,1,0,t),c=this._validMovesAlongLine(e,0,-1,t);return[].concat(Object(O.a)(a),Object(O.a)(r),Object(O.a)(s),Object(O.a)(c),Object(O.a)(n),Object(O.a)(i),Object(O.a)(o),Object(O.a)(l))}}]),n}(p);function T(e){var t=Object(k.a)(e,2),n=t[0],i=t[1];if(n<0||n>7)throw RangeError("Row out of bounds");if(i<0||i>7)throw RangeError("Column out of bounds");var o=String.fromCharCode(i+97),l=8-n;return"".concat(o).concat(l)}var A=function(e){Object(u.a)(n,e);var t=Object(v.a)(n);function n(e,i,o){Object(s.a)(this,n);var l=e===w.WHITE?"\u2659":"\u265f",a=e===w.WHITE?"P":"p";return t.call(this,"\u265f",l,a,e,i,o)}return Object(c.a)(n,[{key:"hasMoved",value:function(){return this.color===w.WHITE&&6!==this.row||this.color===w.BLACK&&1!==this.row}},{key:"validMoves",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=[];this.color===w.WHITE?this.row>0&&null===e.get(this.row-1,this.col)&&i.push(new C([this.row,this.col],[this.row-1,this.col])):this.color===w.BLACK&&this.row<7&&null===e.get(this.row+1,this.col)&&i.push(new C([this.row,this.col],[this.row+1,this.col])),this.hasMoved()||(this.color===w.WHITE?this.row>1&&null===e.get(this.row-1,this.col)&&null===e.get(this.row-2,this.col)&&i.push(new C([this.row,this.col],[this.row-2,this.col])):this.color===w.BLACK&&this.row<6&&null===e.get(this.row+1,this.col)&&null===e.get(this.row+2,this.col)&&i.push(new C([this.row,this.col],[this.row+2,this.col])));e.get(this.row,this.col-1),e.get(this.row,this.col+1);if(this.color===w.WHITE){if(this.row>0&&this.col>0){var o=e.get(this.row-1,this.col-1);(o&&o.isEnemyOf(this.color)||e.enPassantTarget===T([this.row-1,this.col-1]))&&i.push(new C([this.row,this.col],[this.row-1,this.col-1]))}if(this.row>0&&this.col<7){var l=e.get(this.row-1,this.col+1);(l&&l.isEnemyOf(this.color)||e.enPassantTarget===T([this.row-1,this.col+1]))&&i.push(new C([this.row,this.col],[this.row-1,this.col+1]))}}else if(this.color===w.BLACK){if(this.row<7&&this.col>0){var a=e.get(this.row+1,this.col-1);(a&&a.isEnemyOf(this.color)||e.enPassantTarget===T([this.row+1,this.col-1]))&&i.push(new C([this.row,this.col],[this.row+1,this.col-1]))}if(this.row<7&&this.col<7){var r=e.get(this.row+1,this.col+1);(r&&r.isEnemyOf(this.color)||e.enPassantTarget===T([this.row+1,this.col+1]))&&i.push(new C([this.row,this.col],[this.row+1,this.col+1]))}}return i.forEach((function(e){e.execute=function(n){var i=Object(k.a)(e.coordsAStart,2),o=i[0],l=(i[1],Object(k.a)(e.coordsAEnd,2)),a=l[0],r=l[1];n.enPassantTarget===T([a,r])&&(t.color===w.WHITE?n.board[a+1][r]=null:t.color===w.BLACK&&(n.board[a-1][r]=null)),n.move(e),2===Math.abs(o-a)?t.color===w.WHITE?n.enPassantTarget=T([a+1,r]):t.color===w.BLACK&&(n.enPassantTarget=T([a-1,r])):n.enPassantTarget="-",0!==a&&7!==a||(n.board[a][r]=new y(t.color,a,r))}})),n?i.filter((function(n){return!e.kingWouldBeInCheck(t.color,n)})):i}}]),n}(p),B=n(13),W=n(10),P=function(e){Object(u.a)(n,e);var t=Object(v.a)(n);function n(e,i,o){Object(s.a)(this,n);var l=e===w.WHITE?"\u2656":"\u265c",a=e===w.WHITE?"R":"r";return t.call(this,"\u265c",l,a,e,i,o)}return Object(c.a)(n,[{key:"move",value:function(e,t){Object(B.a)(Object(W.a)(n.prototype),"move",this).call(this,e,t)}},{key:"validMoves",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this._validMovesAlongLine(e,-1,0,t),i=this._validMovesAlongLine(e,1,0,t),o=this._validMovesAlongLine(e,0,1,t),l=this._validMovesAlongLine(e,0,-1,t),a=[].concat(Object(O.a)(n),Object(O.a)(o),Object(O.a)(i),Object(O.a)(l));return a.forEach((function(e){e.execute=function(t){var n=Object(k.a)(e.coordsAStart,2),i=n[0],o=n[1];7===i&&7===o?t.invalidateCastle("K"):7===i&&0===o?t.invalidateCastle("Q"):0===i&&7===o?t.invalidateCastle("k"):0===i&&0===o&&t.invalidateCastle("q"),t.move(e),t.enPassantTarget="-"}})),a}}]),n}(p),H=function(e){Object(u.a)(n,e);var t=Object(v.a)(n);function n(e,i,o){Object(s.a)(this,n);var l=e===w.WHITE?"\u2654":"\u265a",a=e===w.WHITE?"K":"k";return t.call(this,"\u265a",l,a,e,i,o)}return Object(c.a)(n,[{key:"move",value:function(e,t){Object(B.a)(Object(W.a)(n.prototype),"move",this).call(this,e,t)}},{key:"queenSideCastleAvailable",value:function(e){var t=this.color===w.WHITE?"Q":"q";return e.castleAvailable(t)}},{key:"canQueenSideCastle",value:function(e){var t=this.color===w.WHITE?7:0;return!!this.queenSideCastleAvailable(e)&&(null===e.get(t,1)&&null===e.get(t,2)&&null===e.get(t,3)&&(!e.kingInCheck(this.color)&&(!e.kingWouldBeInCheck(this.color,new C([t,4],[t,3]))&&!e.kingWouldBeInCheck(this.color,new C([t,4],[t,2])))))}},{key:"kingSideCastleAvailable",value:function(e){var t=this.color===w.WHITE?"K":"k";return e.castleAvailable(t)}},{key:"canKingSideCastle",value:function(e){var t=this.color===w.WHITE?7:0;e.get(t,7);return!!this.kingSideCastleAvailable(e)&&(null===e.get(t,5)&&null===e.get(t,6)&&(!e.kingInCheck(this.color)&&(!e.kingWouldBeInCheck(this.color,new C([t,4],[t,5]))&&!e.kingWouldBeInCheck(this.color,new C([t,4],[t,6])))))}},{key:"validMoves",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=[new C([this.row,this.col],[this.row-1,this.col]),new C([this.row,this.col],[this.row-1,this.col+1]),new C([this.row,this.col],[this.row,this.col+1]),new C([this.row,this.col],[this.row+1,this.col+1]),new C([this.row,this.col],[this.row+1,this.col]),new C([this.row,this.col],[this.row+1,this.col-1]),new C([this.row,this.col],[this.row,this.col-1]),new C([this.row,this.col],[this.row-1,this.col-1])],o=null,l=i.filter((function(n){var i=Object(k.a)(n.coordsAEnd,2),l=i[0],a=i[1];return!(l<0||l>7||a<0||a>7)&&(!(o=e.get(l,a))||!(!o||!o.isEnemyOf(t.color)))}));if(n){if(this.canQueenSideCastle(e)){var a=this.color===w.WHITE?7:0;l.push(new C([a,4],[a,2],[a,0],[a,3]))}if(this.canKingSideCastle(e)){var r=this.color===w.WHITE?7:0;l.push(new C([r,4],[r,6],[r,7],[r,5]))}}return l.forEach((function(e){e.execute=function(n){t.color===w.WHITE?n.invalidateCastle("KQ"):t.color===w.BLACK&&n.invalidateCastle("kq"),n.move(e),n.enPassantTarget="-"}})),n?l.filter((function(n){return!e.kingWouldBeInCheck(t.color,n)})):l}}]),n}(p),M=function(){function e(){Object(s.a)(this,e),this.board=[[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null]],this.currentPlayer=w.WHITE,this.availableCastles="-",this.enPassantTarget="-",this.halfMoveClock=0,this.fullMoveNumber=1}return Object(c.a)(e,[{key:"get",value:function(e,t){return this.board[e][t]}},{key:"getFileRank",value:function(e){var t=function(e){if(2!==e.length||e.toLowerCase()!==e)throw TypeError("FileRank must be 2-character lowercase string");var t=e[0],n=Number(e[1]);if(t<"a"||t>"h")throw RangeError("File out of bounds");if(n<1||n>8)throw RangeError("Rank out of bounds");return[8-n,t.charCodeAt(0)-97]}(e),n=Object(k.a)(t,2),i=n[0],o=n[1];return this.board[i][o]}},{key:"reset",value:function(){this.board=[[new P(w.BLACK,0,0),new I(w.BLACK,0,1),new m(w.BLACK,0,2),new y(w.BLACK,0,3),new H(w.BLACK,0,4),new m(w.BLACK,0,5),new I(w.BLACK,0,6),new P(w.BLACK,0,7)],[new A(w.BLACK,1,0),new A(w.BLACK,1,1),new A(w.BLACK,1,2),new A(w.BLACK,1,3),new A(w.BLACK,1,4),new A(w.BLACK,1,5),new A(w.BLACK,1,6),new A(w.BLACK,1,7)],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[new A(w.WHITE,6,0),new A(w.WHITE,6,1),new A(w.WHITE,6,2),new A(w.WHITE,6,3),new A(w.WHITE,6,4),new A(w.WHITE,6,5),new A(w.WHITE,6,6),new A(w.WHITE,6,7)],[new P(w.WHITE,7,0),new I(w.WHITE,7,1),new m(w.WHITE,7,2),new y(w.WHITE,7,3),new H(w.WHITE,7,4),new m(w.WHITE,7,5),new I(w.WHITE,7,6),new P(w.WHITE,7,7)]],this.currentPlayer=w.WHITE,this.availableCastles="KQkq",this.enPassantTarget="-",this.halfMoveClock=0,this.fullMoveNumber=1}},{key:"move",value:function(e){var t=Object(k.a)(e.coordsAStart,2),n=t[0],i=t[1],o=Object(k.a)(e.coordsAEnd,2),l=o[0],a=o[1],r=this.board[n][i];if(this.board[l][a]=r,this.board[n][i]=null,r.move(l,a),r instanceof A||r instanceof H?this.halfMoveClock=0:this.halfMoveClock++,null!==e.coordsBStart&&null!==e.coordsBEnd){var s=Object(k.a)(e.coordsBStart,2),c=s[0],h=s[1],u=Object(k.a)(e.coordsBEnd,2),v=u[0],d=u[1],f=this.board[c][h];this.board[v][d]=f,this.board[c][h]=null,f.move(v,d)}this.currentPlayer=this.currentPlayer===w.WHITE?w.BLACK:w.WHITE,this.currentPlayer===w.WHITE&&this.fullMoveNumber++}},{key:"removePiece",value:function(e,t){this.board[e][t]=null}},{key:"castleAvailable",value:function(e){return this.availableCastles.includes(e)}},{key:"invalidateCastle",value:function(e){this.availableCastles=this.availableCastles.replace(e,""),""===this.availableCastles&&(this.availableCastles="-")}},{key:"kingInCheck",value:function(e){for(var t=this.getPiecesFor(e).filter((function(e){return e instanceof H}))[0],n=this.getPiecesFor(e===w.WHITE?w.BLACK:w.WHITE),i=0;i<n.length;i++){if(n[i].validMoves(this,!1).filter((function(e){return e.coordsAEnd[0]===t.row&&e.coordsAEnd[1]===t.col})).length>0)return!0}return!1}},{key:"kingInCheckmate",value:function(e){var t=this;if(!this.kingInCheck(e))return!1;var n=this.getPiecesFor(e),i=[];return n.forEach((function(e){i.push.apply(i,Object(O.a)(e.validMoves(t)))})),0===i.length}},{key:"kingWouldBeInCheck",value:function(e,t){var n=Object(g.cloneDeep)(this);return t.execute(n),n.kingInCheck(e)}},{key:"getPieces",value:function(){var e=[];return this.board.forEach((function(t){t.forEach((function(t){null!==t&&e.push(t)}))})),e}},{key:"getPiecesFor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=[];return this.board.forEach((function(i){i.forEach((function(i){null!==i&&i.color===e&&(null===t||i instanceof t)&&n.push(i)}))})),n}},{key:"toFEN",value:function(){var e=[];this.board.forEach((function(t){var n="",i=0;t.forEach((function(e){null===e?i++:(i&&(n+=i,i=0),n+=e.notation)})),i&&(n+=i),e.push(n)}));var t=e.join("/");return t+=this.currentPlayer===w.WHITE?" w":" b",t+=" ".concat(this.availableCastles),t+=" ".concat(this.enPassantTarget),t+=" ".concat(this.halfMoveClock),t+=" ".concat(this.fullMoveNumber)}},{key:"print",value:function(){var e=[];this.board.forEach((function(t){var n="";t.forEach((function(e){n+=null===e?".":e.printIcon})),e.push(n)})),console.log(e.join("\n"))}}],[{key:"fromFEN",value:function(t){var n=t.split(" ");if(6!==n.length)throw new Error("FEN string must have 6 components: [ranks activePlayer availableCastles enPassantTarget halfMoveClock fullMoveNumber]");var i=n[0],o=n[1],l=n[2],a=n[3],r=n[4],s=n[5];if(-1===i.indexOf("K")||-1===i.indexOf("k"))throw new Error("Both white and black king must be present");var c=new e,h=i.split("/");if(8!==h.length)throw new RangeError("FEN must contain 8 ranks");for(var u=0;u<8;u++){for(var v=0,d=0;d<h[u].length;d++){var f=h[u][d];if(!(f>="1"&&f<="8"||["P","N","B","R","Q","K"].includes(f.toUpperCase())))throw new Error("Invalid rank notation char");if(f>="1"&&f<="8")v+=Number(f);else{var b=f===f.toUpperCase()?w.WHITE:w.BLACK,j=void 0;switch(f.toLowerCase()){case"p":j=new A(b,u,v);break;case"n":j=new I(b,u,v);break;case"b":j=new m(b,u,v);break;case"r":j=new P(b,u,v);break;case"q":j=new y(b,u,v);break;case"k":j=new H(b,u,v);break;default:throw new Error("Invalid piece notation")}c.board[u][v]=j,v++}}if(v<7||v>8)throw new Error("File must contain 8 pieces")}switch(o){case"w":c.currentPlayer=w.WHITE;break;case"b":c.currentPlayer=w.BLACK;break;default:throw new Error("Invalid active color notation")}if(!l.match("(-|K?Q?k?q?)"))throw new Error("Malformed available castles");if(c.availableCastles=l,!(1===a.length&&"-"===a||2===a.length&&a[0]>="a"&&a[0]<="h"&&a[1]>=1&&a[1]<=8))throw new Error("Malformed en passant target");if(c.enPassantTarget=a,isNaN(r)||parseInt(r)!=r||parseInt(r)<0)throw new Error("Half Move Clock must be an integer >= 0");if(c.halfMoveClock=Number(r),isNaN(s)||parseInt(s)!=s||parseInt(s)<1)throw new Error("Full Move Number must be a positive integer");return c.fullMoveNumber=Number(s),c}}]),e}(),L=function(e){Object(u.a)(n,e);var t=Object(v.a)(n);function n(e){var i;return Object(s.a)(this,n),(i=t.call(this,e)).state={fenCode:i.props.fenCode},i.handleChange=i.handleChange.bind(Object(h.a)(i)),i.handleSubmit=i.handleSubmit.bind(Object(h.a)(i)),i}return Object(c.a)(n,[{key:"handleChange",value:function(e){this.setState((function(t){return Object(r.a)(Object(r.a)({},t),{},{fenCode:e.target.value,errorStr:""})}))}},{key:"handleSubmit",value:function(e){e.preventDefault();try{M.fromFEN(this.state.fenCode)}catch(t){return void this.setState((function(e){return Object(r.a)(Object(r.a)({},e),{},{errorStr:t.message})}))}this.props.updateBoard(this.state.fenCode)}},{key:"render",value:function(){return Object(d.jsxs)("div",{children:[Object(d.jsxs)("form",{className:"fen-form",onSubmit:this.handleSubmit,children:[Object(d.jsx)("label",{htmlFor:"fen-input",children:"FEN"}),Object(d.jsx)("input",{className:"fen-input",name:"fen-input",type:"text",size:"87",maxLength:"87",value:this.state.fenCode,onChange:this.handleChange})]}),Object(d.jsx)("p",{className:"fen-form-error",children:this.state.errorStr})]})}}]),n}(o.a.Component),S=(n(28),function(e){Object(u.a)(n,e);var t=Object(v.a)(n);function n(e){var i;return Object(s.a)(this,n),(i=t.call(this,e)).handleOnClick=i.handleOnClick.bind(Object(h.a)(i)),i}return Object(c.a)(n,[{key:"handleOnClick",value:function(e,t){this.props.movePiece(e,t)}},{key:"render",value:function(){var e=this;return Object(d.jsx)("div",{children:this.props.validMoves.map((function(t,n){var i=Object(k.a)(t.coordsAEnd,2),o=i[0],l=i[1];return Object(d.jsx)("div",{className:"valid-move",style:{top:"".concat(50*o,"px"),left:"".concat(50*l,"px")},onClick:function(){return e.handleOnClick(o,l)},children:"\u2022"},"valid-move".concat(n))}))})}}]),n}(o.a.Component)),K=function(e){Object(u.a)(n,e);var t=Object(v.a)(n);function n(e){var i;Object(s.a)(this,n),i=t.call(this,e);var o=new M;return o.reset(),i.state={chessBoardState:o,selectedPiece:null},i.selectPiece=i.selectPiece.bind(Object(h.a)(i)),i.movePiece=i.movePiece.bind(Object(h.a)(i)),i.updateBoard=i.updateBoard.bind(Object(h.a)(i)),i}return Object(c.a)(n,[{key:"selectPiece",value:function(e){e===this.state.selectedPiece?this.setState((function(e){return Object(r.a)(Object(r.a)({},e),{},{selectedPiece:null})})):e.color===this.state.chessBoardState.currentPlayer&&this.setState((function(t){return Object(r.a)(Object(r.a)({},t),{},{selectedPiece:e})}))}},{key:"movePiece",value:function(e,t){var n=this;if(this.state.selectedPiece){var i=this.state.selectedPiece.validMoves(this.state.chessBoardState).filter((function(n){return n.coordsAEnd[0]===e&&n.coordsAEnd[1]===t}))[0];i?i.execute(this.state.chessBoardState):console.log("Invalid move"),console.log(this.state.chessBoardState.toFEN()),this.setState((function(e){return Object(r.a)(Object(r.a)({},e),{},{chessBoardState:M.fromFEN(n.state.chessBoardState.toFEN()),selectedPiece:null})}))}else console.log("No piece selected")}},{key:"updateBoard",value:function(e){this.setState((function(t){return Object(r.a)(Object(r.a)({},t),{},{chessBoardState:M.fromFEN(e)})}))}},{key:"render",value:function(){var e=this,t=this.state.chessBoardState.getPieces();return Object(d.jsxs)("div",{children:[Object(d.jsx)(f,{movePiece:this.movePiece}),t.map((function(t){return Object(d.jsx)(j,{piece:t,isInCheck:t instanceof H&&e.state.chessBoardState.kingInCheck(t.color),selectPiece:function(){return e.selectPiece(t)}},"chess-piece".concat(t.id))})),this.state.selectedPiece?Object(d.jsx)(S,{validMoves:this.state.selectedPiece.validMoves(this.state.chessBoardState),movePiece:this.movePiece}):Object(d.jsx)("div",{}),Object(d.jsx)(L,{fenCode:this.state.chessBoardState.toFEN(),updateBoard:this.updateBoard})]})}}]),n}(o.a.Component);a.a.render(Object(d.jsx)(o.a.StrictMode,{children:Object(d.jsx)(K,{})}),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.5e080691.chunk.js.map